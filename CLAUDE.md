# BlindAuction é¡¹ç›®è¯´æ˜æ–‡æ¡£ï¼ˆç»™ Claude AI çš„æŒ‡å—ï¼‰

> æœ¬æ–‡æ¡£ä¸“é—¨ä¸º Claude AI åŠ©æ‰‹æä¾›é¡¹ç›®ä¸Šä¸‹æ–‡ï¼Œå¸®åŠ©å¿«é€Ÿç†è§£é¡¹ç›®æ¶æ„å’ŒååŠ©å¼€å‘ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

**BlindAuction** æ˜¯ä¸€ä¸ªåŸºäº FHEVMï¼ˆå…¨åŒæ€åŠ å¯†è™šæ‹Ÿæœºï¼‰çš„å»ä¸­å¿ƒåŒ–ç›²æ‹å¹³å°ï¼Œéƒ¨ç½²åœ¨ Sepolia æµ‹è¯•ç½‘ã€‚

- **åç§°**: BlindAuction
- **ç‰ˆæœ¬**: 2.0.0
- **ç½‘ç»œ**: Sepolia Testnet
- **æ ¸å¿ƒæŠ€æœ¯**: FHEVM (Zama), React, TypeScript, Hardhat, Solidity

## ğŸ— é¡¹ç›®æ¶æ„

### ç›®å½•ç»“æ„

```
BlindAuction/
â”œâ”€â”€ fhevm-hardhat-template/        # æ™ºèƒ½åˆçº¦å±‚
â”‚   â”œâ”€â”€ contracts/                 # Solidity åˆçº¦
â”‚   â”‚   â”œâ”€â”€ BlindAuction.sol       # ä¸»æ‹å–åˆçº¦ï¼ˆæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼‰
â”‚   â”‚   â”œâ”€â”€ MySecretToken.sol      # ERC7984 åŠ å¯†ä»£å¸
â”‚   â”‚   â””â”€â”€ TokenExchange.sol      # ETH â‡„ SAT ä»£å¸å…‘æ¢
â”‚   â”œâ”€â”€ deploy/                    # Hardhat éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ deployments/sepolia/       # Sepolia éƒ¨ç½²åœ°å€ï¼ˆJSONï¼‰
â”‚   â””â”€â”€ test/                      # åˆçº¦æµ‹è¯•
â”‚
â”œâ”€â”€ zh-blindauction/               # å‰ç«¯åº”ç”¨å±‚
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ hooks/                 # React è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ useAdminActions.ts        # ç®¡ç†å‘˜æ“ä½œ
â”‚   â”‚   â”‚   â”œâ”€â”€ useAuctions.ts            # æ‹å–åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ useBlindAuctionContract.ts # åˆçº¦äº¤äº’
â”‚   â”‚   â”‚   â”œâ”€â”€ useDeliveryActions.ts     # ç‰©æµæ“ä½œ
â”‚   â”‚   â”‚   â””â”€â”€ useTokenActions.ts        # ä»£å¸æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ pages/                # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Index.tsx         # é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ Auctions.tsx      # æ‹å–åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ CreateAuction.tsx # åˆ›å»ºæ‹å–
â”‚   â”‚   â”‚   â”œâ”€â”€ MyAuctions.tsx    # æˆ‘çš„æ‹å–
â”‚   â”‚   â”‚   â”œâ”€â”€ AuctionDetail.tsx # æ‹å–è¯¦æƒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ TokenManagement.tsx # ä»£å¸ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ Admin.tsx         # ç®¡ç†å‘˜é¢æ¿
â”‚   â”‚   â”œâ”€â”€ components/           # UI ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ auction/          # æ‹å–ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/           # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ui/               # shadcn/ui ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ contexts/             # React Context
â”‚   â”‚   â”‚   â”œâ”€â”€ FhevmContext.tsx  # FHEVM å®ä¾‹
â”‚   â”‚   â”‚   â”œâ”€â”€ LanguageContext.tsx # å›½é™…åŒ–
â”‚   â”‚   â”‚   â””â”€â”€ ThemeContext.tsx  # ä¸»é¢˜åˆ‡æ¢
â”‚   â”‚   â”œâ”€â”€ config/               # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ contracts.ts      # åˆçº¦åœ°å€å’Œ ABI
â”‚   â”‚   â””â”€â”€ lib/                  # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ public/                   # é™æ€èµ„æº
â”‚
â”œâ”€â”€ scripts/                      # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ sync-contracts.js         # åŒæ­¥åˆçº¦åœ°å€åˆ°å‰ç«¯
â”‚   â””â”€â”€ dev-tools.js              # å¼€å‘å·¥å…·èœå•
â”‚
â””â”€â”€ docs/                         # æ–‡æ¡£ï¼ˆæ ¹ç›®å½•çš„ .md æ–‡ä»¶ï¼‰
```

### æŠ€æœ¯æ ˆè¯¦æƒ…

#### æ™ºèƒ½åˆçº¦å±‚
- **Solidity 0.8.27** - åˆçº¦è¯­è¨€
- **Hardhat** - å¼€å‘æ¡†æ¶
- **FHEVM by Zama** - å…¨åŒæ€åŠ å¯†åº“
- **OpenZeppelin** - å®‰å…¨æ ‡å‡†åº“

#### å‰ç«¯å±‚
- **React 18.3.1** + **TypeScript 5.8.3**
- **Vite 5.4.19** - æ„å»ºå·¥å…·
- **wagmi 3.4.1** + **viem 2.45.0** - åŒºå—é“¾äº¤äº’
- **fhevmjs 0.7.2** - FHEVM å®¢æˆ·ç«¯åº“
- **shadcn/ui** + **Tailwind CSS** - UI æ¡†æ¶
- **Framer Motion** - åŠ¨ç”»åº“

#### åŒºå—é“¾
- **Sepolia Testnet** (Chain ID: 11155111)
- **Infura** - RPC èŠ‚ç‚¹

## ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µ

### 1. FHEVMï¼ˆå…¨åŒæ€åŠ å¯†ï¼‰

é¡¹ç›®ä½¿ç”¨ Zama çš„ FHEVM æŠ€æœ¯å®ç°é“¾ä¸Šéšç§ä¿æŠ¤ï¼š

- **åŠ å¯†ä»£å¸ï¼ˆeuint64ï¼‰**: å‡ºä»·é‡‘é¢ä»¥åŠ å¯†å½¢å¼å­˜å‚¨åœ¨é“¾ä¸Š
- **åŠ å¯†æ¯”è¾ƒ**: æ™ºèƒ½åˆçº¦å¯ä»¥ç›´æ¥æ¯”è¾ƒåŠ å¯†æ•°æ®ï¼Œæ— éœ€è§£å¯†
- **å¯†é’¥ç®¡ç†**: ç”¨æˆ·é€šè¿‡ fhevmjs ç”Ÿæˆå…¬é’¥ï¼Œåˆçº¦ä½¿ç”¨è¯¥å…¬é’¥åŠ å¯†æ•°æ®

**å…³é”®æ–‡ä»¶**:
- `FhevmContext.tsx` - ç®¡ç† FHEVM å®ä¾‹çš„åˆå§‹åŒ–
- `MySecretToken.sol` - ERC7984 æ ‡å‡†çš„åŠ å¯†ä»£å¸

### 2. æ‹å–çŠ¶æ€æœº

æ‹å–æœ‰ä»¥ä¸‹çŠ¶æ€ï¼š

```solidity
enum AuctionStatus {
    Pending,      // æœªå¼€å§‹
    Active,       // è¿›è¡Œä¸­
    Ended,        // å·²ç»“æŸï¼ˆç­‰å¾…é¢†å–ï¼‰
    Claimed,      // å·²é¢†å–ï¼ˆç­‰å¾…å‘è´§ï¼‰
    Delivered,    // å·²å‘è´§ï¼ˆç­‰å¾…ç¡®è®¤æ”¶è´§ï¼‰
    Completed,    // å·²å®Œæˆ
    Cancelled,    // å·²å–æ¶ˆ
    Disputed      // äº‰è®®ä¸­
}
```

**çŠ¶æ€è½¬æ¢è§„åˆ™**:
- Pending â†’ Activeï¼šæ‹å–å¼€å§‹æ—¶é—´åˆ°è¾¾
- Active â†’ Endedï¼šæ‹å–ç»“æŸæ—¶é—´åˆ°è¾¾
- Ended â†’ Claimedï¼šèµ¢å®¶æ”¯ä»˜æŠ¼é‡‘é¢†å–
- Claimed â†’ Deliveredï¼šå–å®¶ç¡®è®¤å‘è´§
- Delivered â†’ Completedï¼šä¹°å®¶ç¡®è®¤æ”¶è´§

### 3. èµ„é‡‘æµè½¬

1. **åˆ›å»ºæ‹å–**: å–å®¶æ”¯ä»˜ 0.01 ETH æŒ‚å•è´¹
2. **å‡ºä»·**: ä¹°å®¶æˆæƒå¹¶ä½¿ç”¨åŠ å¯†ä»£å¸ï¼ˆSATï¼‰
3. **é¢†å–æ‹å–**: èµ¢å®¶æ”¯ä»˜ 0.05 ETH æŠ¼é‡‘
4. **ç¡®è®¤æ”¶è´§**: æŠ¼é‡‘é€€è¿˜ç»™ä¹°å®¶ï¼ŒSAT æ”¯ä»˜ç»™å–å®¶
5. **äº‰è®®ä»²è£**: ç®¡ç†å‘˜å¯åˆ†é…èµ„é‡‘

## ğŸ“ å¸¸è§å¼€å‘ä»»åŠ¡

### æ·»åŠ æ–°çš„æ‹å–åŠŸèƒ½

1. **ä¿®æ”¹æ™ºèƒ½åˆçº¦** (`BlindAuction.sol`)
   - æ·»åŠ æ–°çš„çŠ¶æ€å˜é‡æˆ–å‡½æ•°
   - æ›´æ–°äº‹ä»¶å®šä¹‰

2. **é‡æ–°éƒ¨ç½²åˆçº¦**
   ```bash
   cd fhevm-hardhat-template
   npx hardhat compile
   npx hardhat deploy --network sepolia
   ```

3. **åŒæ­¥åˆçº¦åœ°å€åˆ°å‰ç«¯**
   ```bash
   cd ..
   npm run sync
   ```

4. **æ›´æ–°å‰ç«¯ Hooks** (`zh-blindauction/src/hooks/`)
   - æ·»åŠ å¯¹åº”çš„ React Hook
   - ä½¿ç”¨ `useWriteContract` è°ƒç”¨æ–°å‡½æ•°

5. **æ›´æ–° UI** (`zh-blindauction/src/pages/` æˆ– `components/`)
   - æ·»åŠ æŒ‰é’®æˆ–è¡¨å•
   - è°ƒç”¨æ–°çš„ Hook

### ä¿®æ”¹ UI æ ·å¼

- **ä¸»é¢˜é…ç½®**: `zh-blindauction/tailwind.config.ts`
- **å…¨å±€æ ·å¼**: `zh-blindauction/src/index.css`
- **ç»„ä»¶æ ·å¼**: ä½¿ç”¨ Tailwind CSS ç±»å

### æ·»åŠ å›½é™…åŒ–æ–‡æœ¬

åœ¨å„ç»„ä»¶ä¸­ï¼Œæ‰€æœ‰æ–‡æœ¬éƒ½ä½¿ç”¨ `LanguageContext` è¿›è¡Œå›½é™…åŒ–ï¼š

```tsx
const { t } = useLanguage();

<Button>{t('createAuction')}</Button>
```

è¯­è¨€å®šä¹‰åœ¨ `LanguageContext.tsx` ä¸­çš„ `translations` å¯¹è±¡ã€‚

### è°ƒè¯• FHEVM ç›¸å…³é—®é¢˜

1. **æ£€æŸ¥ FHEVM åˆå§‹åŒ–**:
   - æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°
   - æŸ¥çœ‹ "FHEVM initialized" æ—¥å¿—

2. **å¸¸è§é”™è¯¯**:
   - `FhevmInstance is null` - FHEVM æœªåˆå§‹åŒ–
   - `Public key not found` - é’±åŒ…æœªç”Ÿæˆå…¬é’¥
   - `Encryption failed` - åŠ å¯†æ“ä½œå¤±è´¥

3. **è§£å†³æ–¹æ³•**:
   - ç¡®ä¿ `FhevmProvider` åŒ…è£¹æ•´ä¸ªåº”ç”¨
   - ç­‰å¾… FHEVM åˆå§‹åŒ–å®Œæˆï¼ˆçº¦ 10-15 ç§’ï¼‰
   - é‡æ–°è¿æ¥é’±åŒ…

## ğŸ›  å¼€å‘å‘½ä»¤é€ŸæŸ¥

```bash
# æ ¹ç›®å½•å‘½ä»¤
npm run setup              # å®‰è£…æ‰€æœ‰ä¾èµ–
npm run start              # å¯åŠ¨å‰ç«¯ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
npm run build              # æ„å»ºå‰ç«¯
npm run sync               # åŒæ­¥ Sepolia åˆçº¦åœ°å€
npm run sync:local         # åŒæ­¥æœ¬åœ°åˆçº¦åœ°å€
npm run tools              # å¼€å¯å¼€å‘å·¥å…·èœå•

# æ™ºèƒ½åˆçº¦å‘½ä»¤ï¼ˆfhevm-hardhat-template/ï¼‰
npx hardhat compile        # ç¼–è¯‘åˆçº¦
npx hardhat deploy --network sepolia  # éƒ¨ç½²åˆ° Sepolia
npx hardhat test           # è¿è¡Œåˆçº¦æµ‹è¯•
npx hardhat clean          # æ¸…ç†ç¼–è¯‘äº§ç‰©

# å‰ç«¯å‘½ä»¤ï¼ˆzh-blindauction/ï¼‰
npm run dev                # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run build              # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run preview            # é¢„è§ˆæ„å»ºç»“æœ
```

## ğŸ“¦ å·²éƒ¨ç½²åˆçº¦åœ°å€ï¼ˆSepoliaï¼‰

| åˆçº¦åç§° | åœ°å€ |
|---------|------|
| MySecretToken | `0x168ecd6465D5f6A479ef1cF7bc7B23748eD6e0c7` |
| TokenExchange | `0x420d4172D8153cB3fB76b21Ffd0b482F62112f7C` |
| BlindAuction | `0x34a1A618f97Ae34DdE31292a06E594dc511e98FC` |

**æŸ¥çœ‹åˆçº¦**: https://sepolia.etherscan.io/

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### æ—¶é—´æœºåˆ¶

- **åŒºå—é“¾æ—¶é—´ (`block.timestamp`)**: åˆçº¦é€»è¾‘ä½¿ç”¨ï¼Œä¸å¯ç¯¡æ”¹
- **æµè§ˆå™¨æ—¶é—´ (`Date.now()`)**: ä»…ç”¨äºå‰ç«¯æ˜¾ç¤ºå€’è®¡æ—¶
- **ä¿®æ”¹æµè§ˆå™¨æ—¶é—´ä¸ä¼šå½±å“æ‹å–çŠ¶æ€**

è¯¦è§: [TIME_MECHANISM_EXPLAINED.md](./TIME_MECHANISM_EXPLAINED.md)

### FHEVM é™åˆ¶

- åŠ å¯†æ•°æ®ï¼ˆ`euint64`ï¼‰ä¸èƒ½ç›´æ¥è¯»å–å…·ä½“å€¼
- åªèƒ½é€šè¿‡ `decryptEuint64()` å¹¶é…åˆç”¨æˆ·ç­¾åè§£å¯†
- åˆçº¦å†…éƒ¨å¯ä»¥æ¯”è¾ƒåŠ å¯†æ•°æ®ï¼Œä½†ä¸èƒ½è·å–æ˜æ–‡

### Gas æ¶ˆè€—

- FHEVM æ“ä½œï¼ˆåŠ å¯†ã€æ¯”è¾ƒï¼‰æ¶ˆè€—è¾ƒé«˜ gas
- Sepolia æµ‹è¯•ç½‘å…è´¹ï¼Œä½†çœŸå®ç½‘ç»œéœ€è€ƒè™‘æˆæœ¬ä¼˜åŒ–

### å®‰å…¨è€ƒè™‘

- æ°¸è¿œéªŒè¯ç”¨æˆ·è¾“å…¥
- æ‹å–çŠ¶æ€è½¬æ¢éœ€ä¸¥æ ¼æ ¡éªŒ
- èµ„é‡‘æ“ä½œä½¿ç”¨ ReentrancyGuard
- ç®¡ç†å‘˜æƒé™ä»…é™å¿…è¦æ“ä½œ

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¿«é€Ÿå¼€å§‹](./QUICKSTART.md) - å¿«é€Ÿä¸Šæ‰‹æŒ‡å—
- [æµ‹è¯•æŒ‡å—](./TEST_GUIDE.md) - å®Œæ•´æµ‹è¯•æµç¨‹
- [éƒ¨ç½²æŒ‡å—](./SEPOLIA_DEPLOYMENT_GUIDE.md) - Sepolia éƒ¨ç½²æ­¥éª¤
- [æ—¶é—´æœºåˆ¶è¯¦è§£](./TIME_MECHANISM_EXPLAINED.md) - åŒºå—é“¾æ—¶é—´ vs æµè§ˆå™¨æ—¶é—´
- [å‰ç«¯å¼€å‘æŒ‡å—](./zh-blindauction/FRONTEND_DEVELOPMENT_GUIDE.md) - å‰ç«¯å®Œæ•´æ–‡æ¡£
- [å¼€å‘è§„èŒƒ](./DEVELOPMENT_STANDARDS.md) - ä»£ç è§„èŒƒå’Œæ¨¡å—åŒ–æŒ‡å—

## ğŸ”— å¤–éƒ¨èµ„æº

- **Zama FHEVM æ–‡æ¡£**: https://docs.zama.ai/fhevm
- **Sepolia Faucet**: https://sepoliafaucet.com/
- **Wagmi æ–‡æ¡£**: https://wagmi.sh/
- **shadcn/ui**: https://ui.shadcn.com/

## ğŸ’¡ ååŠ©å»ºè®®

å½“ç”¨æˆ·è¯·æ±‚å¸®åŠ©æ—¶ï¼Œè¯·éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š

1. **å…ˆè¯»åå†™**: åœ¨ä¿®æ”¹ä»»ä½•ä»£ç å‰ï¼Œå…ˆé˜…è¯»ç›¸å…³æ–‡ä»¶
2. **ä¿æŒä¸€è‡´æ€§**: éµå¾ªé¡¹ç›®ç°æœ‰çš„ä»£ç é£æ ¼å’Œæ¶æ„
3. **æœ€å°æ”¹åŠ¨**: åªä¿®æ”¹å¿…è¦çš„éƒ¨åˆ†ï¼Œé¿å…è¿‡åº¦é‡æ„
4. **å®Œæ•´æµ‹è¯•**: æä¾›æµ‹è¯•æ­¥éª¤æˆ–å»ºè®®ç”¨æˆ·å¦‚ä½•éªŒè¯
5. **å®‰å…¨ç¬¬ä¸€**: ç‰¹åˆ«æ³¨æ„æ™ºèƒ½åˆçº¦çš„å®‰å…¨æ€§
6. **æ–‡æ¡£åŒæ­¥**: å¦‚æœ‰é‡å¤§æ”¹åŠ¨ï¼Œå»ºè®®æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### å‰ç«¯æ— æ³•è¿æ¥é’±åŒ…
- æ£€æŸ¥ MetaMask æ˜¯å¦åˆ‡æ¢åˆ° Sepolia
- æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å’Œ LocalStorage

### äº¤æ˜“å¤±è´¥
- æŸ¥çœ‹ Etherscan ä¸Šçš„é”™è¯¯ä¿¡æ¯
- æ£€æŸ¥è´¦æˆ·æ˜¯å¦æœ‰è¶³å¤Ÿçš„ Sepolia ETH

### FHEVM åŠ å¯†å¤±è´¥
- ç­‰å¾… FHEVM å®ä¾‹å®Œå…¨åˆå§‹åŒ–
- æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦ç¨³å®š
- åˆ·æ–°é¡µé¢é‡æ–°åˆå§‹åŒ–

### åˆçº¦åœ°å€ä¸åŒ¹é…
- è¿è¡Œ `npm run sync` é‡æ–°åŒæ­¥åœ°å€
- æ£€æŸ¥ `zh-blindauction/src/config/contracts.ts`

---

**æœ€åæ›´æ–°**: 2026-02-08
**ç»´æŠ¤è€…**: BlindAuction Team
